# Universal Translation System Environment Variables
# Copy this file to .env and customize for your environment

# ===== General Configuration =====
MODEL_VERSION=1.0.0
# Optional log level override (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ===== Web SDK Configuration =====
# API endpoints
DECODER_API_URL=https://api.yourdomain.com/decode
ENCODER_API_URL=https://api.universal-translation.com/encode

# Model paths
MODEL_URL=/models/universal_encoder.onnx
VOCAB_URL=/vocabs
WASM_ENCODER_PATH=/wasm/encoder.js

# Feature flags
USE_WASM_ENCODER=true
ENABLE_FALLBACK=true

# ===== React Native SDK Configuration =====
# Feature flags for React Native
USE_NATIVE_ENCODER=true

# ===== Cloud Decoder Configuration =====
# Server settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_TITLE=Cloud Decoder API

# Security (CRITICAL - must set before running)
# Use either DECODER_JWT_SECRET or DECODER_JWT_SECRET_FILE (file path). The file form is recommended in Docker/K8s.
# Generate with: openssl rand -hex 32
# DECODER_JWT_SECRET_FILE=/run/secrets/decoder_jwt_secret
DECODER_JWT_SECRET=use-openssl-rand-hex-32-to-generate-a-secure-key

# Paths
DECODER_CONFIG_PATH=config/decoder_config.yaml
HF_HUB_REPO_ID=your-username/universal-translation-system

# ===== Coordinator Configuration =====
# Server settings
COORDINATOR_HOST=0.0.0.0
COORDINATOR_PORT=5100
COORDINATOR_WORKERS=1
COORDINATOR_TITLE=Universal Translation Coordinator

# Security (CRITICAL - must set before running)
# Use secret-file variants in containers: *_FILE will be read by services if set.
# Generate with: openssl rand -hex 32
# COORDINATOR_SECRET_FILE=/run/secrets/coordinator_secret
# COORDINATOR_JWT_SECRET_FILE=/run/secrets/coordinator_jwt_secret
# COORDINATOR_TOKEN_FILE=/run/secrets/coordinator_token
# INTERNAL_SERVICE_TOKEN_FILE=/run/secrets/internal_service_token
COORDINATOR_SECRET=use-openssl-rand-hex-32-to-generate-a-secure-cookie-key
COORDINATOR_JWT_SECRET=use-openssl-rand-hex-32-to-generate-a-secure-jwt-key
COORDINATOR_TOKEN=use-openssl-rand-hex-16-to-generate-a-secure-admin-token
INTERNAL_SERVICE_TOKEN=use-openssl-rand-hex-32-to-generate-a-secure-service-token

# RS256 (optional)
# Coordinator supports RS256. Provide paths; multiple public keys can be '||' separated for rotation.
# JWT_PRIVATE_KEY_FILE=/run/secrets/jwt_private_key
# JWT_PUBLIC_KEY_PATH=/run/secrets/jwt_public_key

# Paths
POOL_CONFIG_PATH=configs/decoder_pool.json

# ===== Universal Decoder Node Configuration =====
# Endpoints
DECODER_ENDPOINT=http://localhost:8000
COORDINATOR_URL=http://localhost:5100

# Server settings
DECODER_HOST=0.0.0.0
DECODER_PORT=8000
DECODER_WORKERS=1

# Paths
VOCAB_DIR=vocabs

# ===== Hugging Face Hub =====
# HF auth and layout
# HF_TOKEN=hf_xxx                           # set via `huggingface-cli login` or env
# HF_HUB_REPO_ID=your-username/universal-translation-system
# HF_HUB_REVISION=main
# MODELS_DIR=models
# VOCABS_DIR=vocabs
# ADAPTERS_DIR=models/adapters
# Optional prefetch hints for decoder startup (comma-separated):
# PREFETCH_VOCAB_GROUPS=latin,cjk
# PREFETCH_ADAPTERS=es,fr,ja

# ===== Vocabulary Creation Configuration =====
# Model paths
ENCODER_MODEL_PATH=models/production/encoder.pt
FALLBACK_MODEL_PATH=models/fallback/encoder.pt
EMBEDDING_DIM=768

# ===== Service Discovery (optional) =====
# SERVICE_DISCOVERY_COORDINATOR_URL=http://localhost:5100
# SERVICE_DISCOVERY_HEARTBEAT_INTERVAL=30
# SERVICE_DISCOVERY_TIMEOUT=5

# ===== Python Constants Overrides (optional) =====
# You can override defaults in utils/constants.py via env. Both UTS_<NAME> and <NAME> are accepted.
# Timing & retries
# UTS_DEFAULT_TIMEOUT=30
# UTS_MAX_RETRY_COUNT=3
# UTS_DEFAULT_BATCH_SIZE=64
# UTS_DEFAULT_BUFFER_SIZE=8192

# Caching & resource limits
# UTS_MAX_CACHE_SIZE=10000
# UTS_DEFAULT_CACHE_TTL=3600
# UTS_MAX_MEMORY_USAGE=1073741824
# UTS_MAX_FILE_SIZE=104857600

# Security
# UTS_TOKEN_EXPIRATION=1800
# UTS_REFRESH_TOKEN_EXPIRATION=604800
# UTS_PASSWORD_MIN_LENGTH=8
# UTS_PASSWORD_MAX_LENGTH=128
# UTS_MAX_LOGIN_ATTEMPTS=5
# UTS_LOCKOUT_DURATION=900

# Encoder/Decoder dimensions
# UTS_ENCODER_EMBEDDING_DIM=512
# UTS_ENCODER_HIDDEN_DIM=1024
# UTS_ENCODER_NUM_LAYERS=6
# UTS_ENCODER_NUM_HEADS=8
# UTS_ENCODER_DROPOUT=0.1
# UTS_ENCODER_MAX_LENGTH=512
# UTS_DECODER_EMBEDDING_DIM=512
# UTS_DECODER_HIDDEN_DIM=1024
# UTS_DECODER_NUM_LAYERS=6
# UTS_DECODER_NUM_HEADS=8
# UTS_DECODER_DROPOUT=0.1
# UTS_DECODER_MAX_LENGTH=512

# Vocabulary
# UTS_VOCAB_SIZE=32000
# UTS_VOCAB_MIN_FREQUENCY=5
# UTS_VOCAB_SPECIAL_TOKENS=["<pad>","<unk>","<bos>","<eos>"]
# or: UTS_VOCAB_SPECIAL_TOKENS=<pad>,<unk>,<bos>,<eos>
# UTS_VOCAB_PAD_ID=0
# UTS_VOCAB_UNK_ID=1
# UTS_VOCAB_BOS_ID=2
# UTS_VOCAB_EOS_ID=3

# API
# UTS_API_RATE_LIMIT=100
# UTS_API_BURST_LIMIT=20
# UTS_API_TIMEOUT=30

# Paths
# UTS_DEFAULT_CONFIG_PATH=config/default_config.json
# UTS_DEFAULT_MODEL_PATH=models/default_model
# UTS_DEFAULT_VOCAB_PATH=vocabulary/default_vocab
# UTS_DEFAULT_LOG_PATH=logs/system.log

# Mirroring configuration
# COORDINATOR_MIRROR_INTERVAL=30 # Default 60 seconds 
