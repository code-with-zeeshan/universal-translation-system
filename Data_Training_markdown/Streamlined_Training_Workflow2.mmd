graph TB
    %% Data Sources
    subgraph "Pretrained Models"
        A1[XLM-RoBERTa<br/>xlm-roberta-base]
        A2[mBART<br/>facebook/mbart-large-50]
        A3[NLLB<br/>facebook/nllb-200-distilled-600M]
    end
    
    %% Bootstrap Phase
    subgraph "Phase 1: Bootstrap"
        B1[bootstrap_from_pretrained.py]
        B2[universal_encoder_initial.pt]
        B3[universal_decoder_initial.pt]
        B4[Vocabulary Mappings]
    end
    
    %% Training Infrastructure
    subgraph "Phase 2: Training Setup"
        C1[distributed_train.py<br/>Multi-GPU Setup]
        C2[memory_efficient_training.py<br/>Memory Optimization]
        C3[Training Configuration]
    end
    
    %% Main Training
    subgraph "Phase 3: Main Training"
        D1[train_universal_system.py<br/>Complete Training Loop]
        D2[ParallelDataset<br/>Data Loading]
        D3[Model Checkpoints]
        D4[Validation Metrics]
    end
    
    %% Model Conversion
    subgraph "Phase 4: Deployment"
        E1[convert_models.py<br/>Format Conversion]
        E2[model.onnx<br/>Cross-platform]
        E3[model.mlmodel<br/>iOS CoreML]
        E4[model.tflite<br/>Android TFLite]
    end
    
    %% Training Components
    subgraph "Training Components"
        F1[UniversalEncoder]
        F2[OptimizedUniversalDecoder]
        F3[VocabularyManager]
        F4[Dynamic Batching]
    end
    
    %% Monitoring & Logging
    subgraph "Monitoring"
        G1[Weights & Biases]
        G2[Training Metrics]
        G3[Validation Curves]
    end
    
    %% Connections - Phase 1
    A1 --> B1
    A2 --> B1
    A3 --> B1
    B1 --> B2
    B1 --> B3
    B1 --> B4
    
    %% Connections - Phase 2
    B2 --> F1
    B3 --> F2
    B4 --> F3
    C1 --> D1
    C2 --> D1
    
    %% Connections - Phase 3
    F1 --> D1
    F2 --> D1
    F3 --> D1
    D2 --> D1
    D1 --> D3
    D1 --> D4
    D1 --> G1
    
    %% Connections - Phase 4
    D3 --> E1
    E1 --> E2
    E1 --> E3
    E1 --> E4
    
    %% Monitoring connections
    D1 --> G2
    D4 --> G3
    
    %% Styling
    classDef bootstrap fill:#e1f5fe
    classDef training fill:#f3e5f5
    classDef conversion fill:#e8f5e8
    classDef monitoring fill:#fff3e0
    
    class B1,B2,B3,B4 bootstrap
    class C1,C2,C3,D1,D2,D3,D4,F1,F2,F3,F4 training
    class E1,E2,E3,E4 conversion
    class G1,G2,G3 monitoring